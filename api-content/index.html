{"posts":[{"title":"Hmaster 启动过程","content":"1. 调用链 HMasterCommandLine | | - run local | ----- - startMaster -| | | |- new MiniZooKeeperCluster.startup //embedded zookeeper cluster | | |- createDir //创建 zk 数据目录 | | |- zks = new ZooKeeperServer | | |- new NIOServerCnxn.Factory(clientPort).startup //启动服务 | | | | | | | |- zks.startdata | | | | | | | | | |- new ZKDatabase | | | | |- loadData // Restore sessions and data | | | | | | | - zks.startup | | | | | | | |- startSessionTracker | | | |- setupRequestProcessors | | | | | | | |- new FinalRequestProcessor | | | |- new SyncRequestProcessor.start | | | |- new PrepRequestProcessor.start | | | |- registerJMX //注册JMX mbean | | | | | - waitForServerUp // echo &quot;stat&quot; to assert zk liveless | | | | | - new LocalHBaseCluster().startup //启动包括 Hmaster + RS 的服务 | | | |- masterClass = org.apache.hadoop.hbase.master.HMasterCommandLine$LocalHMaster | |-addMaster() | | |- createMasterThread() | | | |- HMaster.init() | | | | |- HregionServer.init() | | | | | |- UserProvider.instantiate(conf) // 初始化 userprovider | | | | | |- FSUtils.setupShortCircuitRead(this.conf) // short circuit read setup | | | | | |- createRpcServices() | | | | | | | - MasterRpcServices.init() -&gt;RSRpcServices.init() | | | | | | | | - rpcServer = new RpcServer() | | | | | | | | | - rpcSchedulerFactory.create() | | | | | | | | | | - callExecutor //初始化读写executor | | | | | | | | | | - priorityExecutor //初始化priorityExecutor | | | | | | | | | | - replicationExecutor //初始化replicationExecutor | | | | | |- new ZooKeeperWatcher() //初始化zk连接和watcher，并create相关的znode | | | | | |- TableLockManager.createTableLockManager | | | | | |- new MasterAddressTracker.start() // /hbase/master znode watcher to track master address | | | | | | | - createBaseZNodes() | | | | | | | | | - RpcServer.init() | | | | | | | | | | - | | |- rpcServer = HBaseRPC.getServer | | |- rpcServer.startThreads | | | | | | | |- responder.start() | | | |- listener.start() | | | - handlers = new Handler[handlerCount].startall() | | | | | - new ZooKeeperWatcher | | | |- HRegionServer.newInstance | | | | | |- server = HBaseRPC.getServer | | - run | | | | | - server.startThreads | | | - start master and rs threads | | ------------ HMaster.constructMaster(HMaster.class, conf）-&gt;start(); distributed | | | |- new MiniZooKeeperCluster.startup | | | | | |- zks = new ZooKeeperServer | | |- new NIOServerCnxn.Factory(clientPort).startup | | | | | | | |- zks.startdata | | | | | | | | | |- new ZKDatabase | | | | | | | - zks.startup | | | | | | | |- startSessionTracker | | | - setupRequestProcessors | | | | | | | | PrepRequestProcessor -&gt; SyncRequestProcessor -&gt; FinalRequestProcessor | | | | | | | |- new FinalRequestProcessor | | | |- new SyncRequestProcessor | | | - new PrepRequestProcessor | | | | | - socket connect clientPort 'stat' to assert zk alive | | | | | - new LocalHBaseCluster().startup | | | |- HMaster.newInstance | | | | | |- rpcServer = HBaseRPC.getServer | | |- rpcServer.startThreads | | | | | | | |- responder.start() | | | |- listener.start() | | | - handlers = new Handler[handlerCount].startall() | | | | | - new ZooKeeperWatcher | | | |- HRegionServer.newInstance | | | | | |- server = HBaseRPC.getServer | | - run | | | | | - server.startThreads | | | - start master and rs threads | | ------------ HMaster.constructMaster(HMaster.class, conf）-&gt;start(); ","link":"https://casperit.github.io/post/hmaster-qi-dong-guo-cheng/"},{"title":"Hello Gridea","content":"👏 欢迎使用 Gridea ！ ✍️ Gridea 一个静态博客写作客户端。你可以用它来记录你的生活、心情、知识、笔记、创意... ... Github Gridea 主页 示例网站 特性👇 📝 你可以使用最酷的 Markdown 语法，进行快速创作 🌉 你可以给文章配上精美的封面图和在文章任意位置插入图片 🏷️ 你可以对文章进行标签分组 📋 你可以自定义菜单，甚至可以创建外部链接菜单 💻 你可以在 Windows，MacOS 或 Linux 设备上使用此客户端 🌎 你可以使用 𝖦𝗂𝗍𝗁𝗎𝖻 𝖯𝖺𝗀𝖾𝗌 或 Coding Pages 向世界展示，未来将支持更多平台 💬 你可以进行简单的配置，接入 Gitalk 或 DisqusJS 评论系统 🇬🇧 你可以使用中文简体或英语 🌁 你可以任意使用应用内默认主题或任意第三方主题，强大的主题自定义能力 🖥 你可以自定义源文件夹，利用 OneDrive、百度网盘、iCloud、Dropbox 等进行多设备同步 🌱 当然 Gridea 还很年轻，有很多不足，但请相信，它会不停向前 🏃 未来，它一定会成为你离不开的伙伴 尽情发挥你的才华吧！ 😘 Enjoy~ ","link":"https://casperit.github.io/post/hello-gridea/"}]}